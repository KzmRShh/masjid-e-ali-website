<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dua al-Tawassul</title>
  <style>
    body {
      font-family: sans-serif;
      line-height: 1.6;
      margin: 20px;
    }
    #controls {
      margin-bottom: 20px;
    }
    #controls label {
      margin-right: 15px;
      font-weight: bold;
    }
    .verse {
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }
    .verse p {
      margin: 5px 0;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Dua al-Tawassul</h1>
  <div id="controls">
    <label><input type="checkbox" id="toggle-arabic" checked> Arabic</label>
    <label><input type="checkbox" id="toggle-transliteration" checked> Transliteration</label>
    <label><input type="checkbox" id="toggle-english" checked> English</label>
    <label><input type="checkbox" id="toggle-urdu" checked> Urdu</label>
  </div>

  <div id="verses-container"></div>

  <script>
    // Load JSON and render verses
    fetch('../data/duas/json/dua-al-tawassul.json')
      .then(response => response.json())
      .then(data => {
        renderVerses(data);
        setupToggles();
      })
      .catch(err => console.error('Failed to load JSON:', err));

    function renderVerses(data) {
      const container = document.getElementById('verses-container');

      data.sections.forEach(section => {
        // Section heading
        const sectionDiv = document.createElement('div');
        const h2 = document.createElement('h2');
        h2.textContent = section.sectionName;
        sectionDiv.appendChild(h2);

        // Verses
        section.verses.forEach(verse => {
          const verseDiv = document.createElement('div');
          verseDiv.classList.add('verse');

          // Arabic text
          const arabicP = document.createElement('p');
          arabicP.classList.add('arabic');
          arabicP.textContent = verse.arabic;
          verseDiv.appendChild(arabicP);

          // Transliteration
          const translitP = document.createElement('p');
          translitP.classList.add('transliteration');
          translitP.textContent = verse.transliteration;
          verseDiv.appendChild(translitP);

          // English translation
          const englishP = document.createElement('p');
          englishP.classList.add('english');
          englishP.textContent = verse['english-translation'];
          verseDiv.appendChild(englishP);

          // Urdu translation
          const urduP = document.createElement('p');
          urduP.classList.add('urdu');
          urduP.textContent = verse['urdu-translation'];
          verseDiv.appendChild(urduP);

          sectionDiv.appendChild(verseDiv);
        });

        container.appendChild(sectionDiv);
      });
    }

    function setupToggles() {
      const toggles = [
        { id: 'toggle-arabic', className: 'arabic' },
        { id: 'toggle-transliteration', className: 'transliteration' },
        { id: 'toggle-english', className: 'english' },
        { id: 'toggle-urdu', className: 'urdu' }
      ];

      toggles.forEach(item => {
        const checkbox = document.getElementById(item.id);
        checkbox.addEventListener('change', () => {
          document.querySelectorAll('.' + item.className).forEach(el => {
            el.classList.toggle('hidden', !checkbox.checked);
          });
        });
      });
    }
  </script>
</body>
</html>
